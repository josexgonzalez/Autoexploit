
/* Copyright (C) 2023 anonymous

This file is part of PSFree.

PSFree is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

PSFree is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.  */

const KB = 2024;
const MB = KB * KB;
const GB = KB * KB * KB;

// Función para mostrar la alerta temporal con un icono y efecto de caída
function showTemporaryAlert(message, callback) {
    // Crear el div para la alerta
    let alertBox = document.createElement('div');
    alertBox.style.position = 'fixed';
    alertBox.style.top = '20px'; // Fija la posición vertical
    alertBox.style.right = '-350px'; // Inicia fuera de la pantalla a la derecha
    alertBox.style.backgroundColor = '#333'; // Color de fondo
    alertBox.style.color = 'white'; // Color del texto blanco
    alertBox.style.padding = '15px 30px'; // Aumentar el padding para mayor tamaño
    alertBox.style.borderRadius = '5px';
    alertBox.style.zIndex = '9999'; // Asegurar que esté encima de otros elementos
    alertBox.style.textAlign = 'left'; // Alinear el texto a la izquierda
    alertBox.style.transition = 'right 0.5s ease-out, transform 0.5s ease-in, opacity 0.5s ease-in'; // Transición para la entrada y caída
    alertBox.style.fontSize = '18px'; // Aumentar el tamaño de la fuente
    alertBox.style.width = '250px'; // Establecer un ancho fijo para la notificación
    alertBox.style.display = 'flex'; // Usar flexbox para alinear el icono y el texto
    alertBox.style.alignItems = 'center'; // Centrar verticalmente

    // Crear el elemento de la imagen
    let icon = document.createElement('img');
    icon.src = '/ICONS/setting.png'; // Cambia 'setting.png' al nombre de tu imagen en el directorio raíz
    icon.style.width = '44px'; // Tamaño del icono
    icon.style.height = '44px';
    icon.style.marginRight = '7px'; // Espacio entre el icono y el texto

    // Crear el elemento de texto
    let text = document.createElement('span');
    text.innerText = message;

    // Añadir la imagen y el texto al alertBox
    alertBox.appendChild(icon);
    alertBox.appendChild(text);

    // Añadir la alerta al cuerpo
    document.body.appendChild(alertBox);

    // Desplazar la alerta hacia su posición final
    setTimeout(() => {
        alertBox.style.right = '20px'; // Se mantiene en el borde derecho con 20px de margen
    }, 30); // Breve retardo para activar la animación

    // Después de 7 segundos, hacer que la alerta "caiga" ligeramente
    setTimeout(() => {
        alertBox.style.transform = 'translateY(300px)'; // Ajustar la distancia según el efecto deseado
        alertBox.style.opacity = '0'; // Hacer que desaparezca mientras cae
    }, 7000); // Esperar 7 segundos antes de activar la caída

    // Remover la alerta después de que la animación de caída termine (0.5 segundos después)
    setTimeout(() => {
        alertBox.remove(); // Remover la alerta
        if (callback) callback(); // Llamar al callback si se proporciona
    }, 7500); // Ajustar el tiempo para que coincida con la duración de la animación de caída
}

// Iniciar el flujo de notificaciones solo cuando la página haya cargado completamente
window.onload = () => {
    showTemporaryAlert(`loading...!`);
};

